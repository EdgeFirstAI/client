sonar.organization=edgefirstai
sonar.projectKey=EdgeFirstAI_client
sonar.projectName=EdgeFirst Client
sonar.sources=.
sonar.host.url=https://sonarcloud.io
sonar.sourceEncoding=UTF-8

# Mark test files explicitly - this excludes them from source analysis and issue reporting
sonar.test.inclusions=test/**/*.py,crates/*/tests/**/*,swift/EdgeFirstClientTests/**/*.swift

# Ignore issues in inline Rust test modules (blocks between #[cfg(test)] and closing brace)
sonar.issue.ignore.block=e1
sonar.issue.ignore.block.e1.beginBlockRegexp=^\\s*#\\[cfg\\(test\\)\\]
sonar.issue.ignore.block.e1.endBlockRegexp=^\\s*}\\s*$

# Python configuration
sonar.python.version=3.8,3.9,3.10,3.11,3.12
sonar.python.coverage.reportPaths=coverage.xml

# Rust configuration
# - lcov.info: Coverage from Rust unit tests and Python FFI tests (lint-and-test job)
# - rust-ffi-coverage.lcov: Coverage from Swift FFI tests (swift-test job, push to main only)
sonar.rust.lcov.reportPaths=lcov.info,rust-ffi-coverage.lcov

# Swift configuration (coverage from swift-test job)
# Note: Swift source files are generated during CI and downloaded as artifacts
sonar.swift.file.suffixes=.swift
# Use generic coverage format for Swift (sonar.swift.coverage.reportPaths expects llvm-cov show format, not lcov)
# The swift-coverage.xml is converted from lcov to SonarCloud generic format during CI
sonar.coverageReportPaths=swift-coverage.xml

# Ignore code quality issues in UniFFI-generated Swift bindings
# We still want coverage reporting on these files, just not linting
sonar.issue.ignore.allfile=uniffi1,uniffi2,uniffi3
sonar.issue.ignore.allfile.uniffi1.fileRegexp=swift/EdgeFirstClient\\.swift
sonar.issue.ignore.allfile.uniffi2.fileRegexp=swift/EdgeFirstClientFFI\\.h
sonar.issue.ignore.allfile.uniffi3.fileRegexp=swift/EdgeFirstClientFFI\\.modulemap

# Disable C/C++/Obj-C analysis
sonar.c.file.suffixes=-
sonar.cpp.file.suffixes=-
sonar.objc.file.suffixes=-

# Ignore duplicates in test files
sonar.cpd.exclusions=**/tests/**,**/test_*.py,test.py

# Ignore coverage for development scripts
sonar.coverage.exclusions=sonar.py
