# cargo-release configuration
# See: https://github.com/crate-ci/cargo-release/blob/master/docs/reference.md

# Only release from main branch (restricts default which allows any branch)
allow-branch = ["main"]

# Tag format (without 'v' prefix to match your existing tags like "2.2.2")
tag-name = "{{version}}"
tag-message = "Release {{version}}"

# Commit message for version bump
pre-release-commit-message = "Release {{version}} Preparations"

# Don't publish to crates.io (handled by release.yml workflow)
publish = false

# Don't push commits/tags automatically (gives us control to review first)
# Note: cargo-release will still CREATE the tag locally, just won't push it
push = false

# Automatic file updates during release
pre-release-replacements = [
  { file = "../../CLI.md", search = "footer: edgefirst-client [0-9]+\\.[0-9]+\\.[0-9]+", replace = "footer: edgefirst-client {{version}}" },
  { file = "../../CLI.md", search = "date: [0-9]{4}-[0-9]{2}-[0-9]{2}", replace = "date: {{date}}", exactly = 1 },
]
